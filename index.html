<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bhannuz â€” Live Gold & Silver Rates Hyderabad</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400;1,600&family=JetBrains+Mono:wght@300;400;500;700&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --gold:       #C8922A;
  --gold-hi:    #F0C060;
  --gold-dim:   #6B4A12;
  --silver:     #8BA0B2;
  --silver-hi:  #C8D8E8;
  --silver-dim: #3A4A58;
  --bg:         #080808;
  --bg2:        #0F0F0F;
  --bg3:        #161616;
  --line:       rgba(255,255,255,0.07);
  --text:       #EAE6E0;
  --muted:      #5A5550;
  --up:         #3CB878;
  --dn:         #D95C5C;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Outfit', sans-serif;
  font-weight: 300;
  min-height: 100vh;
  overflow-x: hidden;
}

/* â”€â”€ GRAIN OVERLAY â”€â”€ */
body::after {
  content: '';
  position: fixed; inset: 0; z-index: 999; pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23g)' opacity='0.035'/%3E%3C/svg%3E");
  opacity: 1;
}

/* â”€â”€ RADIAL GLOW BACKGROUNDS â”€â”€ */
.glow-gold {
  position: fixed; top: -200px; left: -200px;
  width: 700px; height: 700px; border-radius: 50%;
  background: radial-gradient(circle, rgba(200,146,42,0.08) 0%, transparent 70%);
  pointer-events: none; z-index: 0;
}
.glow-silver {
  position: fixed; bottom: -200px; right: -200px;
  width: 600px; height: 600px; border-radius: 50%;
  background: radial-gradient(circle, rgba(139,160,178,0.06) 0%, transparent 70%);
  pointer-events: none; z-index: 0;
}

/* â”€â”€ HEADER â”€â”€ */
header {
  position: relative; z-index: 10;
  border-bottom: 1px solid var(--line);
  padding: 0 32px;
  height: 64px;
  display: flex; align-items: center; justify-content: space-between;
  background: rgba(8,8,8,0.92);
  backdrop-filter: blur(20px);
}

.logo {
  display: flex; align-items: center; gap: 14px;
}

.logo-mark {
  width: 40px; height: 40px;
  background: linear-gradient(135deg, var(--gold) 0%, var(--gold-hi) 100%);
  border-radius: 9px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Cormorant Garamond', serif;
  font-weight: 700; font-size: 1.3rem; color: #1A0800;
  box-shadow: 0 0 28px rgba(200,146,42,0.5), inset 0 1px 0 rgba(255,255,255,0.3);
  letter-spacing: -0.02em;
}

.logo-text {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.6rem; font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text);
  line-height: 1;
}

.logo-text span {
  background: linear-gradient(90deg, var(--gold), var(--gold-hi), #FFF8E7, var(--gold));
  background-size: 300% auto;
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: shimmer-text 4s linear infinite;
}

.header-right { display: flex; align-items: center; gap: 20px; }

.live-pill {
  display: flex; align-items: center; gap: 7px;
  padding: 5px 13px;
  border: 1px solid rgba(60,184,120,0.3);
  border-radius: 100px;
  background: rgba(60,184,120,0.07);
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.65rem; font-weight: 500;
  color: var(--up); letter-spacing: 0.06em;
}

.live-dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--up);
  animation: blink 2s ease-in-out infinite;
}

@keyframes blink {
  0%,100% { opacity:1; box-shadow: 0 0 6px var(--up); }
  50% { opacity:0.3; box-shadow: none; }
}

#clock {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.72rem; color: var(--muted);
  letter-spacing: 0.04em;
}

/* â”€â”€ HERO â”€â”€ */
.hero {
  position: relative; z-index: 5;
  text-align: center;
  padding: 56px 24px 40px;
  border-bottom: 1px solid var(--line);
}

.hero-eyebrow {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.65rem; letter-spacing: 0.2em;
  color: var(--gold); text-transform: uppercase;
  margin-bottom: 14px;
}

.hero-title {
  font-family: 'Cormorant Garamond', serif;
  font-size: clamp(2.2rem, 6vw, 4rem);
  font-weight: 700; line-height: 1.05;
  letter-spacing: -0.01em;
  margin-bottom: 12px;
}

.hero-title em {
  font-style: italic;
  background: linear-gradient(90deg, var(--gold), var(--gold-hi), var(--gold));
  background-size: 200% auto;
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: shimmer-text 3s linear infinite;
}

@keyframes shimmer-text {
  0% { background-position: 0% center; }
  100% { background-position: 200% center; }
}

.hero-sub {
  font-size: 0.85rem; color: var(--muted);
  letter-spacing: 0.03em;
}

/* â”€â”€ META STRIP â”€â”€ */
.meta-strip {
  position: relative; z-index: 5;
  display: flex; align-items: center; justify-content: center; gap: 0;
  border-bottom: 1px solid var(--line);
  overflow: hidden;
}

.meta-item {
  flex: 1; max-width: 220px;
  padding: 14px 20px;
  text-align: center;
  border-right: 1px solid var(--line);
}
.meta-item:last-child { border-right: none; }

.meta-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.55rem; letter-spacing: 0.14em;
  text-transform: uppercase; color: var(--muted);
  margin-bottom: 5px;
}

.meta-val {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.78rem; font-weight: 500;
  color: var(--text);
}

.meta-val.fresh { color: var(--up); }
.meta-val.usd-inr { color: var(--silver-hi); }

/* â”€â”€ MAIN LAYOUT â”€â”€ */
main {
  position: relative; z-index: 5;
  max-width: 1000px; margin: 0 auto;
  padding: 36px 20px 60px;
  display: flex; flex-direction: column; gap: 28px;
}

/* â”€â”€ METAL PANEL â”€â”€ */
.panel {
  border-radius: 20px;
  overflow: hidden;
  border: 1px solid transparent;
  animation: rise 0.7s cubic-bezier(0.22,1,0.36,1) both;
}

.panel.gold-panel { border-color: rgba(200,146,42,0.18); animation-delay: 0.05s; }
.panel.silver-panel { border-color: rgba(139,160,178,0.15); animation-delay: 0.18s; }

@keyframes rise {
  from { opacity:0; transform: translateY(20px); }
  to   { opacity:1; transform: translateY(0); }
}

/* â”€â”€ PANEL HEADER â”€â”€ */
.panel-head {
  padding: 22px 26px 18px;
  display: flex; align-items: center; justify-content: space-between;
  border-bottom: 1px solid var(--line);
}

.gold-panel .panel-head { background: linear-gradient(135deg, #110C03 0%, #0E0A02 100%); }
.silver-panel .panel-head { background: linear-gradient(135deg, #090D11 0%, #070B0E 100%); }

.metal-id { display: flex; align-items: center; gap: 16px; }

.symbol-badge {
  width: 52px; height: 52px; border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.25rem; font-weight: 700;
  flex-shrink: 0;
}

.gold-panel .symbol-badge {
  background: linear-gradient(145deg, #C8922A, #F0C060);
  color: #2A1200;
  box-shadow: 0 4px 24px rgba(200,146,42,0.45), inset 0 1px 0 rgba(255,255,255,0.25);
}

.silver-panel .symbol-badge {
  background: linear-gradient(145deg, #6A7F90, #B8CEE0);
  color: #0D1820;
  box-shadow: 0 4px 20px rgba(139,160,178,0.3), inset 0 1px 0 rgba(255,255,255,0.2);
}

.metal-name-wrap {}

.metal-name {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.5rem; font-weight: 700;
  letter-spacing: 0.02em; line-height: 1;
  margin-bottom: 4px;
}

.gold-panel .metal-name { color: var(--gold-hi); }
.silver-panel .metal-name { color: var(--silver-hi); }

.metal-desc {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.6rem; color: var(--muted);
  letter-spacing: 0.08em; text-transform: uppercase;
}

/* Change badge */
.chg-wrap { text-align: right; }

.chg-badge {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 5px 12px; border-radius: 8px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.8rem; font-weight: 700;
  margin-bottom: 4px;
}

.chg-badge.up   { background: rgba(60,184,120,0.12); color: var(--up); border: 1px solid rgba(60,184,120,0.25); }
.chg-badge.dn   { background: rgba(217,92,92,0.12); color: var(--dn); border: 1px solid rgba(217,92,92,0.25); }
.chg-badge.flat { background: rgba(255,255,255,0.04); color: var(--muted); border: 1px solid var(--line); }

.chg-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.55rem; color: var(--muted); letter-spacing: 0.1em;
}

/* â”€â”€ RATE GRID â”€â”€ */
.rate-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1px;
  background: var(--line);
}

.rate-cell {
  padding: 18px 22px;
  display: flex; flex-direction: column; gap: 5px;
  position: relative;
  transition: background 0.2s;
}

.gold-panel .rate-cell { background: #0C0901; }
.silver-panel .rate-cell { background: #080C10; }

.gold-panel .rate-cell:hover { background: rgba(200,146,42,0.05); }
.silver-panel .rate-cell:hover { background: rgba(139,160,178,0.05); }

.cell-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.58rem; color: var(--muted);
  letter-spacing: 0.1em; text-transform: uppercase;
}

.cell-value {
  font-family: 'JetBrains Mono', monospace;
  font-size: 1.1rem; font-weight: 500;
  letter-spacing: -0.03em;
  transition: color 0.3s;
}

.gold-panel  .cell-value { color: var(--gold-hi); }
.silver-panel .cell-value { color: var(--silver-hi); }

.cell-unit {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.55rem; color: var(--muted);
  letter-spacing: 0.06em;
}

/* Flash animation */
@keyframes flashGold   { 0% { color:#fff; text-shadow: 0 0 16px rgba(240,192,96,0.9); } 100% { color:var(--gold-hi); text-shadow:none; } }
@keyframes flashSilver { 0% { color:#fff; text-shadow: 0 0 16px rgba(200,216,232,0.9); } 100% { color:var(--silver-hi); text-shadow:none; } }

.flash-gold   { animation: flashGold   0.9s ease forwards; }
.flash-silver { animation: flashSilver 0.9s ease forwards; }

/* â”€â”€ TICKER BAR â”€â”€ */
.ticker-bar {
  display: flex; border-top: 1px solid var(--line);
}

.tick-cell {
  flex: 1; padding: 11px 18px;
  display: flex; align-items: center; justify-content: space-between;
  border-right: 1px solid var(--line);
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.63rem;
}
.tick-cell:last-child { border-right: none; }

.gold-panel   .tick-cell { background: #0A0700; color: var(--muted); }
.silver-panel .tick-cell { background: #070A0D; color: var(--muted); }

.tick-val { color: var(--text); font-weight: 500; }

/* â”€â”€ PROGRESS BAR â”€â”€ */
.prog-wrap { height: 2px; overflow: hidden; }
.gold-panel   .prog-wrap { background: rgba(200,146,42,0.08); }
.silver-panel .prog-wrap { background: rgba(139,160,178,0.06); }

.prog-fill {
  height: 100%; border-radius: 2px;
  animation: progress var(--dur,30s) linear infinite;
}

.gold-panel   .prog-fill { background: linear-gradient(90deg, var(--gold), var(--gold-hi)); }
.silver-panel .prog-fill { background: linear-gradient(90deg, var(--silver), var(--silver-hi)); }

@keyframes progress {
  from { width: 0; } to { width: 100%; }
}

/* â”€â”€ DISCLAIMER â”€â”€ */
footer {
  position: relative; z-index: 5;
  border-top: 1px solid var(--line);
  padding: 20px 32px;
  text-align: center;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.58rem; color: var(--muted);
  letter-spacing: 0.05em; line-height: 1.9;
}

/* â”€â”€ SKELETON â”€â”€ */
.skel {
  display: inline-block;
  border-radius: 4px; height: 1em; vertical-align: middle;
  background: linear-gradient(90deg, rgba(255,255,255,0.04) 25%, rgba(255,255,255,0.09) 50%, rgba(255,255,255,0.04) 75%);
  background-size: 200% 100%;
  animation: skel-anim 1.4s infinite;
}
@keyframes skel-anim { 0%{background-position:-200% 0} 100%{background-position:200% 0} }

/* â”€â”€ RESPONSIVE â”€â”€ */
@media (max-width: 680px) {
  header { padding: 0 16px; }
  .logo-text { display: none; }
  .rate-grid { grid-template-columns: repeat(2,1fr); }
  .ticker-bar { flex-wrap: wrap; }
  .tick-cell { min-width: 50%; border-bottom: 1px solid var(--line); }
  .meta-strip { flex-wrap: wrap; }
  .meta-item { min-width: 50%; }
  main { padding: 24px 12px 48px; }
  .panel-head { flex-wrap: wrap; gap: 12px; }
}

@media (max-width: 420px) {
  .rate-grid { grid-template-columns: 1fr 1fr; }
  .cell-value { font-size: 0.9rem; }
}
</style>
</head>
<body>

<div class="glow-gold"></div>
<div class="glow-silver"></div>

<!-- â•â•â• HEADER â•â•â• -->
<header>
  <div class="logo">
    <div class="logo-mark">B</div>
    <div>
      <div class="logo-text"><span>Bhannuz</span></div>
      <div style="font-family:'Cormorant Garamond',serif;font-size:0.55rem;letter-spacing:0.22em;text-transform:uppercase;color:var(--muted);margin-top:2px;">Bullion Â· Hyderabad</div>
    </div>
  </div>
  <div class="header-right">
    <div class="live-pill"><div class="live-dot"></div>LIVE RATES</div>
    <div id="clock">â€”</div>
  </div>
</header>

<!-- â•â•â• HERO â•â•â• -->
<div class="hero">
  <div class="hero-eyebrow">Bhannuz Â· Hyderabad Â· Telangana Â· India</div>
  <h1 class="hero-title"><em>Gold & Silver</em><br>Live Market Rates</h1>
  <div class="hero-sub">Real-time prices Â· Refreshes automatically on every rate change</div>
</div>

<!-- â•â•â• META STRIP â•â•â• -->
<div class="meta-strip">
  <div class="meta-item">
    <div class="meta-label">ğŸ“ Market</div>
    <div class="meta-val">Hyderabad, TG</div>
  </div>
  <div class="meta-item">
    <div class="meta-label">ğŸ’± USD / INR</div>
    <div class="meta-val usd-inr" id="usdInr"><span class="skel" style="width:60px">&nbsp;</span></div>
  </div>
  <div class="meta-item">
    <div class="meta-label">ğŸ”„ Last Updated</div>
    <div class="meta-val" id="lastUpdated">Fetchingâ€¦</div>
  </div>
  <div class="meta-item">
    <div class="meta-label">ğŸ“¡ Next Refresh</div>
    <div class="meta-val" id="nextRefresh">30s</div>
  </div>
</div>

<!-- â•â•â• MAIN â•â•â• -->
<main>

  <!-- â”€â”€â”€ GOLD PANEL â”€â”€â”€ -->
  <div class="panel gold-panel">
    <div class="panel-head">
      <div class="metal-id">
        <div class="symbol-badge">Au</div>
        <div class="metal-name-wrap">
          <div class="metal-name">Gold</div>
          <div class="metal-desc">XAU Â· 24K / 22K / 18K Â· Hyderabad Market</div>
        </div>
      </div>
      <div class="chg-wrap">
        <div class="chg-badge flat" id="goldChg">â€” %</div>
        <div class="chg-label">Change vs yesterday</div>
      </div>
    </div>

    <div class="rate-grid">
      <div class="rate-cell">
        <div class="cell-label">24K Â· Per Gram</div>
        <div class="cell-value" id="g24g"><span class="skel" style="width:80px">&nbsp;</span></div>
        <div class="cell-unit">Pure Â· 999.9 fineness</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">24K Â· Per 10g</div>
        <div class="cell-value" id="g24t"><span class="skel" style="width:88px">&nbsp;</span></div>
        <div class="cell-unit">Pure Â· 999.9 fineness</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">24K Â· Per Tola</div>
        <div class="cell-value" id="g24tola"><span class="skel" style="width:84px">&nbsp;</span></div>
        <div class="cell-unit">11.6638 g Â· traditional</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">22K Â· Per Gram</div>
        <div class="cell-value" id="g22g"><span class="skel" style="width:78px">&nbsp;</span></div>
        <div class="cell-unit">Jewellery Â· 916 fineness</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">22K Â· Per 10g</div>
        <div class="cell-value" id="g22t"><span class="skel" style="width:84px">&nbsp;</span></div>
        <div class="cell-unit">Jewellery Â· 916 fineness</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">18K Â· Per Gram</div>
        <div class="cell-value" id="g18g"><span class="skel" style="width:78px">&nbsp;</span></div>
        <div class="cell-unit">Gold Â· 750 fineness</div>
      </div>
    </div>

    <div class="ticker-bar">
      <div class="tick-cell">
        <span>Intl. Spot</span>
        <span class="tick-val" id="goldSpot">â€”</span>
      </div>
      <div class="tick-cell">
        <span>INR / Tola</span>
        <span class="tick-val" id="goldTola2">â€”</span>
      </div>
      <div class="tick-cell">
        <span>Gold : Silver</span>
        <span class="tick-val" id="gsRatio">â€”</span>
      </div>
    </div>

    <div class="prog-wrap" id="goldProg">
      <div class="prog-fill" style="--dur:30s" id="goldBar"></div>
    </div>
  </div>

  <!-- â”€â”€â”€ SILVER PANEL â”€â”€â”€ -->
  <div class="panel silver-panel">
    <div class="panel-head">
      <div class="metal-id">
        <div class="symbol-badge">Ag</div>
        <div class="metal-name-wrap">
          <div class="metal-name">Silver</div>
          <div class="metal-desc">XAG Â· 999 Fine Â· Hyderabad Market</div>
        </div>
      </div>
      <div class="chg-wrap">
        <div class="chg-badge flat" id="silverChg">â€” %</div>
        <div class="chg-label">Change vs yesterday</div>
      </div>
    </div>

    <div class="rate-grid">
      <div class="rate-cell">
        <div class="cell-label">999 Fine Â· Per Gram</div>
        <div class="cell-value" id="s1g"><span class="skel" style="width:60px">&nbsp;</span></div>
        <div class="cell-unit">Fine Silver Â· 999</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">999 Fine Â· Per 10g</div>
        <div class="cell-value" id="s10g"><span class="skel" style="width:66px">&nbsp;</span></div>
        <div class="cell-unit">Fine Silver Â· 999</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">Per 100 Grams</div>
        <div class="cell-value" id="s100g"><span class="skel" style="width:74px">&nbsp;</span></div>
        <div class="cell-unit">Fine Silver Â· 999</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">Per 250 Grams</div>
        <div class="cell-value" id="s250g"><span class="skel" style="width:74px">&nbsp;</span></div>
        <div class="cell-unit">Fine Silver Â· 999</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">Per 500 Grams</div>
        <div class="cell-value" id="s500g"><span class="skel" style="width:78px">&nbsp;</span></div>
        <div class="cell-unit">Fine Silver Â· 999</div>
      </div>
      <div class="rate-cell">
        <div class="cell-label">Per Kilogram</div>
        <div class="cell-value" id="s1kg"><span class="skel" style="width:78px">&nbsp;</span></div>
        <div class="cell-unit">Fine Silver Â· 999</div>
      </div>
    </div>

    <div class="ticker-bar">
      <div class="tick-cell">
        <span>Intl. Spot</span>
        <span class="tick-val" id="silverSpot">â€”</span>
      </div>
      <div class="tick-cell">
        <span>Per Tola</span>
        <span class="tick-val" id="silverTola">â€”</span>
      </div>
      <div class="tick-cell">
        <span>Per Kg (USD)</span>
        <span class="tick-val" id="silverKgUSD">â€”</span>
      </div>
    </div>

    <div class="prog-wrap" id="silverProg">
      <div class="prog-fill" style="--dur:30s" id="silverBar"></div>
    </div>
  </div>

</main>

<footer>
  Rates are indicative Â· Based on international spot prices converted to INR Â· Includes approx. local market premium<br>
  Actual dealer prices may vary Â· Not financial advice Â· Auto-refreshes every 30 seconds Â· Data: gold-api.com
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONSTANTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TROY_OZ_G    = 31.1035;   // grams per troy oz
const TOLA_G       = 11.6638;   // grams per tola
const LOCAL_PREM   = 1.0048;    // ~0.48% Hyderabad local premium over spot
const REFRESH_MS   = 30000;     // 30 seconds

let USD_INR  = 84.5;   // fallback rate
let prevGold = null;
let prevSilv = null;
let countdown = REFRESH_MS / 1000;
let countdownTimer;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CLOCK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function tickClock() {
  const now = new Date();
  const t = now.toLocaleTimeString('en-IN', {
    timeZone: 'Asia/Kolkata',
    hour: '2-digit', minute: '2-digit', second: '2-digit',
    hour12: true
  });
  document.getElementById('clock').textContent = t + ' IST';
}
setInterval(tickClock, 1000);
tickClock();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COUNTDOWN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startCountdown() {
  clearInterval(countdownTimer);
  countdown = REFRESH_MS / 1000;
  const el = document.getElementById('nextRefresh');
  countdownTimer = setInterval(() => {
    countdown--;
    el.textContent = countdown + 's';
    if (countdown <= 0) {
      el.textContent = 'âŸ³ Now';
      clearInterval(countdownTimer);
    }
  }, 1000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FORMAT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function inr(n) {
  return 'â‚¹' + Math.round(n).toLocaleString('en-IN');
}
function usd(n, d = 2) {
  return '$' + n.toFixed(d);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FLASH ON CHANGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setVal(id, val, cls) {
  const el = document.getElementById(id);
  if (!el) return;
  const text = inr(val);
  if (el.textContent !== text) {
    el.textContent = text;
    el.classList.remove('flash-gold', 'flash-silver');
    void el.offsetWidth; // reflow
    el.classList.add(cls);
    setTimeout(() => el.classList.remove(cls), 1000);
  } else {
    el.textContent = text;
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RESET PROGRESS BAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function resetBar(id) {
  const el = document.getElementById(id);
  el.style.animation = 'none';
  void el.offsetWidth;
  el.style.animation = '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FETCH USD/INR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function fetchForex() {
  try {
    const r = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
    if (r.ok) {
      const d = await r.json();
      if (d.rates?.INR) {
        USD_INR = d.rates.INR;
        document.getElementById('usdInr').textContent = 'â‚¹ ' + USD_INR.toFixed(2);
      }
    }
  } catch (_) {}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN FETCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function fetchRates() {
  try {
    const [gRes, sRes] = await Promise.all([
      fetch('https://api.gold-api.com/price/XAU'),
      fetch('https://api.gold-api.com/price/XAG')
    ]);

    if (!gRes.ok || !sRes.ok) throw new Error('API unavailable');

    const g = await gRes.json();
    const s = await sRes.json();

    const goldUSD   = g.price;  // per troy oz
    const silverUSD = s.price;  // per troy oz

    // â”€â”€ Per gram in INR with local premium â”€â”€
    const goldINRg   = (goldUSD   / TROY_OZ_G) * USD_INR * LOCAL_PREM;
    const silverINRg = (silverUSD / TROY_OZ_G) * USD_INR * LOCAL_PREM;

    // â”€â”€ Gold rates â”€â”€
    setVal('g24g',    goldINRg,                     'flash-gold');
    setVal('g24t',    goldINRg * 10,                'flash-gold');
    setVal('g24tola', goldINRg * TOLA_G,            'flash-gold');
    setVal('g22g',    goldINRg * (22/24),           'flash-gold');
    setVal('g22t',    goldINRg * (22/24) * 10,      'flash-gold');
    setVal('g18g',    goldINRg * (18/24),           'flash-gold');

    // â”€â”€ Silver rates â”€â”€
    setVal('s1g',    silverINRg,       'flash-silver');
    setVal('s10g',   silverINRg * 10,  'flash-silver');
    setVal('s100g',  silverINRg * 100, 'flash-silver');
    setVal('s250g',  silverINRg * 250, 'flash-silver');
    setVal('s500g',  silverINRg * 500, 'flash-silver');
    setVal('s1kg',   silverINRg * 1000,'flash-silver');

    // â”€â”€ Gold change badge â”€â”€
    const gChp  = g.chp  ?? 0;
    const gCh   = g.ch   ?? 0;
    const gBadge = document.getElementById('goldChg');
    const gSign  = gChp >= 0 ? '+' : '';
    gBadge.textContent = `${gSign}${gChp.toFixed(2)}%`;
    gBadge.className   = 'chg-badge ' + (gChp > 0 ? 'up' : gChp < 0 ? 'dn' : 'flat');

    // â”€â”€ Silver change badge â”€â”€
    const sChp  = s.chp  ?? 0;
    const sBadge = document.getElementById('silverChg');
    const sSign  = sChp >= 0 ? '+' : '';
    sBadge.textContent = `${sSign}${sChp.toFixed(2)}%`;
    sBadge.className   = 'chg-badge ' + (sChp > 0 ? 'up' : sChp < 0 ? 'dn' : 'flat');

    // â”€â”€ Ticker values â”€â”€
    document.getElementById('goldSpot').textContent    = usd(goldUSD) + ' /oz';
    document.getElementById('goldTola2').textContent   = inr(goldINRg * TOLA_G);
    document.getElementById('gsRatio').textContent     = (goldUSD / silverUSD).toFixed(1) + ' : 1';

    document.getElementById('silverSpot').textContent  = usd(silverUSD) + ' /oz';
    document.getElementById('silverTola').textContent  = inr(silverINRg * TOLA_G);
    document.getElementById('silverKgUSD').textContent = usd((silverUSD / TROY_OZ_G) * 1000);

    // â”€â”€ Last updated â”€â”€
    const now = new Date();
    const timeStr = now.toLocaleTimeString('en-IN', {
      timeZone: 'Asia/Kolkata',
      hour: '2-digit', minute: '2-digit', second: '2-digit',
      hour12: true
    });
    const lu = document.getElementById('lastUpdated');
    lu.textContent = timeStr;
    lu.classList.add('fresh');
    setTimeout(() => lu.classList.remove('fresh'), 2500);

    // â”€â”€ USD/INR display fallback â”€â”€
    if (document.getElementById('usdInr').textContent.includes('Fetching') ||
        document.getElementById('usdInr').textContent.trim() === '') {
      document.getElementById('usdInr').textContent = 'â‚¹ ' + USD_INR.toFixed(2);
    }

    // â”€â”€ Reset progress bars â”€â”€
    resetBar('goldBar');
    resetBar('silverBar');

    prevGold = goldINRg;
    prevSilv = silverINRg;

  } catch (err) {
    console.error('Fetch error:', err);
    document.getElementById('lastUpdated').textContent = 'Retryâ€¦';
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function init() {
  fetchForex(); // non-blocking
  await fetchRates();
  startCountdown();

  // Auto-refresh every 30s
  setInterval(async () => {
    await fetchRates();
    startCountdown();
  }, REFRESH_MS);

  // Refresh forex every 5 min
  setInterval(fetchForex, 5 * 60 * 1000);
}

init();
</script>
</body>
</html>
